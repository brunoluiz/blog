<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/component---src-templates-blog-post-js.132541fd5a755e92f694.css">#disqus_thread{width:95%;margin:auto}.gatsby-highlight{background-color:#2d2d2d;border-radius:.3em;margin:2em 0;padding:1em;overflow:auto}.gatsby-highlight pre[class*=language-].line-numbers{padding:0 0 0 2.8em;overflow:initial}</style><style data-href="/app.ab12e96a601961374afc.css">code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}</style><meta name="generator" content="Gatsby 2.0.111"/><link rel="canonical" href="https://brunoluiz.net/2019/feb/a-guide-to-npm-package-publishing/" data-baseprotocol="https:" data-basehost="brunoluiz.net"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><title data-react-helmet="true">Bruno Luiz Blog | A guide on npm package publishing</title><meta data-react-helmet="true" name="description" content="If you are not new in the JavaScript world, you might have already heard about  npm . It is a package manager which lets developers easily add dependencies to…"/><meta data-react-helmet="true" property="og:url" content="https://brunoluiz.net/2019/feb/a-guide-to-npm-package-publishing/"/><meta data-react-helmet="true" property="og:title" content="A guide on npm package publishing"/><meta data-react-helmet="true" property="og:image" content="https://brunoluiz.net/static/7240830101bed0c6205181bc5b9ef6fb/935ac/header.jpeg"/><meta data-react-helmet="true" property="og:description" content="If you are not new in the JavaScript world, you might have already heard about  npm . It is a package manager which lets developers easily add dependencies to…"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Bruno Luiz Silva"/><meta data-react-helmet="true" name="twitter:title" content="A guide on npm package publishing"/><meta data-react-helmet="true" name="twitter:description" content="If you are not new in the JavaScript world, you might have already heard about  npm . It is a package manager which lets developers easily add dependencies to…"/><meta data-react-helmet="true" name="google-site-verification" content="2za6GvvisJHVED9GglWd8xO4jWCp4GPpAKYBDM4ttx8"/><script data-react-helmet="true" src="https://my.remarkbox.com/static/js/iframe-resizer/iframeResizer.min.js"></script><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.56 'Source Sans Pro',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.7);font-family:'Source Sans Pro',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;color:hsla(0,0%,0%,0.85);font-family:'Source Sans Pro',sans-serif;font-weight:300;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;color:hsla(0,0%,0%,0.85);font-family:'Source Sans Pro',sans-serif;font-weight:300;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;color:hsla(0,0%,0%,0.85);font-family:'Source Sans Pro',sans-serif;font-weight:300;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;color:hsla(0,0%,0%,0.85);font-family:'Source Sans Pro',sans-serif;font-weight:300;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;color:hsla(0,0%,0%,0.85);font-family:'Source Sans Pro',sans-serif;font-weight:300;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;color:hsla(0,0%,0%,0.85);font-family:'Source Sans Pro',sans-serif;font-weight:300;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}ul{margin-left:1.56rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.56rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;font-size:0.85rem;line-height:1.42;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.56rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;font-size:1rem;line-height:1.56rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}blockquote{margin-left:0;margin-right:1.56rem;margin-top:0;padding-bottom:0;padding-left:1.17rem;padding-right:0;padding-top:0;margin-bottom:1.56rem;font-size:1.20112rem;line-height:1.56rem;color:hsla(0,0%,0%,0.6);border-left:0.39rem solid hsla(0,0%,0%,0.13);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.56rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.56rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.56rem;margin-bottom:calc(1.56rem / 2);margin-top:calc(1.56rem / 2);}li > ul{margin-left:1.56rem;margin-bottom:calc(1.56rem / 2);margin-top:calc(1.56rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.56rem / 2);}code{font-size:0.85rem;line-height:1.56rem;}kbd{font-size:0.85rem;line-height:1.56rem;}samp{font-size:0.85rem;line-height:1.56rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.04rem;padding-right:1.04rem;padding-top:0.78rem;padding-bottom:calc(0.78rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;}pre code{background:none;line-height:1.42;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:none;}h1 a,h2 a,h3 a,h4 a,h5 a,h6 a{font-weight:300;}a{font-weight:400;color:#419eda;text-decoration:none;}a:hover{color:#2a6496;text-decoration:underline;}@media only screen and (max-width:768px){html{font-size:100%;line-height:24.88px;}blockquote{margin-left:-1.17rem;margin-right:0;padding-left:0.78rem;}table{font-size:0.83255rem;line-height:1.56rem;}}</style><link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,400,400i,700" rel="stylesheet" type="text/css"/><link as="script" rel="preload" href="/webpack-runtime-5e20dcb144742c021ea4.js"/><link as="script" rel="preload" href="/app-cb3b67d3f42d9a4e1cee.js"/><link as="script" rel="preload" href="/0-4410c611fa011026aa02.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-bfc555a71129283c7eab.js"/><link as="fetch" rel="preload" href="/static/d/490/path---2019-feb-a-guide-to-npm-package-publishing-d-9-b-3e5-POffpzGCoG4gxioqeal8ZSgax0.json" crossOrigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div style="margin-left:auto;margin-right:auto;max-width:37.44rem;padding:2.34rem 1.17rem"><header><h3 style="margin-top:0"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">Bruno Luiz Blog</a></h3></header><main><h1>A guide on npm package publishing</h1><p style="font-size:0.83255rem;line-height:1.56rem;display:block;margin-bottom:1.56rem;margin-top:-1.56rem">February 15, 2019</p><div><p>
  <a
    class="gatsby-resp-image-link"
    href="/static/7240830101bed0c6205181bc5b9ef6fb/56447/header.jpeg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 720px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 64%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAQUAAAAAAAAAAAAAAAAAAAECAwQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwAC/9oADAMBAAIQAxAAAAFL2DOTOAs//8QAGhAAAgMBAQAAAAAAAAAAAAAAAgMAARIhI//aAAgBAQABBQJJBc8I0NNBmaF3S7f/xAAYEQACAwAAAAAAAAAAAAAAAAABAhASIf/aAAgBAwEBPwE1bTH/xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8BNLW//8QAGxAAAgIDAQAAAAAAAAAAAAAAAAERIQIiMTL/2gAIAQEABj8C3VFIycnDySf/xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMVFhcZH/2gAIAQEAAT8hugEdaYJMN+MLAbYjFG4ro+xW8p//2gAMAwEAAgADAAAAEDjP/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERQf/aAAgBAwEBPxCjQiP/xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QQ4EP/8QAGxABAQEAAgMAAAAAAAAAAAAAAREAIVExQbH/2gAIAQEAAT8QWdSip9HzVz+iGIMnQ87lBVqtwjt7ZVCLs3//2Q=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Photo by Paul Esch-Laurent on Unsplash"
        title=""
        src="/static/7240830101bed0c6205181bc5b9ef6fb/cfe7c/header.jpeg"
        srcset="/static/7240830101bed0c6205181bc5b9ef6fb/f39eb/header.jpeg 180w,
/static/7240830101bed0c6205181bc5b9ef6fb/e1b9c/header.jpeg 360w,
/static/7240830101bed0c6205181bc5b9ef6fb/cfe7c/header.jpeg 720w,
/static/7240830101bed0c6205181bc5b9ef6fb/deb56/header.jpeg 1080w,
/static/7240830101bed0c6205181bc5b9ef6fb/cf22f/header.jpeg 1440w,
/static/7240830101bed0c6205181bc5b9ef6fb/56447/header.jpeg 1600w"
        sizes="(max-width: 720px) 100vw, 720px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>If you are not new in the JavaScript world, you might have already heard about <a href="https://www.npmjs.com/">npm</a>. It is a package manager which lets developers easily add dependencies to projects, as <code>npm install hello-world</code>. But, have you ever asked, “How do I create and publish my own packages”?</p>
<h2>How a package is composed?</h2>
<p>Packages are quite simple to create in JavaScript. A <code>package.json</code> and <code>index.js</code> can already do the job. Look at <code>dedupe</code> for example:</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/65610ff0a36065606864f3ca8d8ed672/486d0/dedupe.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 720px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 65.5625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACTklEQVQ4y52S227TQBCG/RDwCvAk5poqF/A4japK3FBVhdK0Occ52GklBII34YabukpQ1DaxncT2Hu39GTuhaiTKBSv9mrF359uZ2bGCyeSFkMkBgP2tqkzmVa5MVWpUVY6qNqjm+Lt0jn2lzL7SOAij+KV1dHT85vOXr+iPPPQGLpyhi1bXQccZot0bYOBdoTf00Og4qLd7aJJtbNXs9FG7aKJ23kLPGeDg8PCtdXJ69npIQQN3LAkia62+OmsNVbM3Us5go25/qOgS1ez01Gmtrs4bLXV20VC1elM12l3ZHYwkncHR8cmetVgs9rBZVAHMf6qIRRCEFcv3/RKY05KSmzCcY70KwNganJRpDimSUloxsHRNlpc+FzF0Jk2W5SXQv7mpWJPJ5CFDxmIzX0wRhDNEy1sIEUHKZWk5DxFGM9zT/jK8xc+7H/juf4O/8h8yJNYuMFim5td9jFWqEMUSMc/AJCAzQGgglQZMofwfJQKzaEW+eBrIpTZ3K1V+MM4oowhJkiDLiGYoxpiNyrbRmZTK/hcwpeGbhRxFS9ZJirt5gCTlUDRkSmc70lmG5TpGyvjTQKEyE8Ta6MwYRdPKhTB5bnZe9PFKGTNCyl3gdDr9AzRFyfOVQE5HJGUlhISQiiTpRTc+XYDiDuIV2dGjqYceEKtiXV9f7xWbWmsTU78WiwAp9SZhKQWwMuixGBdF30qVvhAoqimAxKpY9Xr9meu6r0ajke15ru04jv3x0wf7feOdfXU5ti/HW239seeV8raWYu0itmAQ6/lvWLaOptvJ26YAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="dedupe repository"
        title=""
        src="/static/65610ff0a36065606864f3ca8d8ed672/5b758/dedupe.png"
        srcset="/static/65610ff0a36065606864f3ca8d8ed672/e6885/dedupe.png 180w,
/static/65610ff0a36065606864f3ca8d8ed672/e17e9/dedupe.png 360w,
/static/65610ff0a36065606864f3ca8d8ed672/5b758/dedupe.png 720w,
/static/65610ff0a36065606864f3ca8d8ed672/a00f5/dedupe.png 1080w,
/static/65610ff0a36065606864f3ca8d8ed672/74039/dedupe.png 1440w,
/static/65610ff0a36065606864f3ca8d8ed672/486d0/dedupe.png 1600w"
        sizes="(max-width: 720px) 100vw, 720px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>There are other useful files such as <code>.gitignore</code>, <code>.npmignore</code>, <code>LICENSE</code> and <code>README.md</code>, but the main ones are there: <code>package.json</code> and <code>index.js</code>.  Having these, the package just needs to be published in a repository, such as the <a href="https://www.npmjs.com/">npm public</a>. Through this guide, you will be able to have a simple package published on npm.</p>
<h2>Create an npm package</h2>
<p>While doing <a href="https://apimock.in">apimock.in</a>, I had to create multiple serverless stacks. Each had error handlers and, as most of the errors are quite the same, a good practice would be to extract these definitions into a package and just install it on each serverless stack. This use case will be used as an example through this post.</p>
<h3>Create an npmjs.com account</h3>
<p>Before doing anything, an account on <a href="https://npmjs.com">npmjs.com</a> is required for publishing a package. This is the website for the npm public repository, used when <code>npm install ...</code> is executed.</p>
<p>To create an account, go to the <a href="https://www.npmjs.com/signup">npm signup page</a> and fill up the form. After finishing the process, a test can be done using <code>npm login</code> and <code>npm whoami</code>. Has it output your username? Great! It is working!</p>
<!-- ![](https://cdn-images-1.medium.com/max/1600/1*sUm176ELamVqjUF1GUpiVw.gif) -->
<h3>Some words about scopes</h3>
<p>Scopes are useful in many ways, although not strictly required to publish an npm package. Every user has its own scope, defined as the npm user name.</p>
<p>As only the developer/company can publish to its own scope, it is quite useful to indicate it is an official package. For example, one can publish a package called <code>xyz-sdk</code>, but another called <code>xyz</code> might already exist. How to know which to install? What if <code>xyz</code> mimics <code>xyz-sdk</code>, but with malicious code?</p>
<blockquote>
<p>Each npm user/organisation has their own scope, and only you can add packages in your scope. This means you don’t have to worry about someone taking your package name ahead of you. Thus it is also a good way to signal official packages for organisations. (<a href="https://docs.npmjs.com/misc/scope">from npm-scopes documentation</a>)</p>
</blockquote>
<p>A scoped package would have an <code>@account</code> prefix. It would be published as <code>@account/xyz-sdk</code>, hence easily identifiable as from a specific developer. Besides, the developer doesn’t have to worry about name clashing, as the scope is account specific. It can be configured to point to a private repository as well, making it especially useful for companies.</p>
<p>There is <a href="https://docs.npmjs.com/misc/scope">more information about scopes here</a>. Keep in mind it is a good practice to scope packages.</p>
<h3>Create a simple structure</h3>
<p>In an empty folder, run <code>npm init —-scope=@your-npm-user</code>. This will setup a <code>package.json</code> and ask for some information, such as name, version, main entry file and author. The end result will be something like the following.</p>
<div class="gatsby-highlight" data-language="json"><pre style="counter-reset: linenumber NaN" class="language-json line-numbers"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"@brunoluiz/jsonapi-errors"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"JSONAPI Common Errors"</span><span class="token punctuation">,</span>
  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"index.js"</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"jest"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"Bruno Luiz da Silva &lt;contact@brunoluiz.net> (http://brunoluiz.net/)"</span><span class="token punctuation">,</span>
  <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"MIT"</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>After having it initialised, is time to code something. Develop a basic implementation of it in the specified main file on <code>npm init</code> setup (usually <code>index.js</code>). If the package requires dependencies or there are files to be ignored on publishing, specify it on a <code>.gitignore</code> file (eg: <code>node_modules</code>).</p>
<p>It is suggested to add a <code>LICENSE.md</code> and a <code>README.md</code>, as other developers might use this package. Usually, MIT or ISC licenses are fine to open-source projects, but <a href="https://choosealicense.com/">choosealicense.com</a> can help on choosing another license.</p>
<h3>Publish the package</h3>
<p>The basic implementation is done and now is time to deploy it! On the first time, a <code>npm publish --access=public</code> is required. The <code>access=public</code> param is needed because scoped are <code>restricted</code> by default. On following publishings, a <code>npm publish</code> will do the job.</p>
<p>Congratulations! You published your first package on npm. It should be available at <code>https://npmjs.com/package/@your-npm-user/package-name</code> and ready to be installed through <code>npm install @your-npm-user/package-name</code>.</p>
<!-- ![](https://cdn-images-1.medium.com/max/1600/1*oltzIY-eP8kDiK7mIlUVIQ.gif) -->
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/9be800ea5db75a774ea4524f0457875b/7ad9a/npm_published_module.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 720px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 65.17615176151762%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACP0lEQVQ4y42Sa04bMRDH9wbtHTjDXqLiUVU9BweALJWiSHkdpuoBKvUDlWihikggYfPYQEjzQKTJbtZeP9YzHZsSVSIfGOmv8fjx83jG3q/T7zvdsPlpHA2D8WQWTGfzoNONguubQdAOo+Cmd7tVvWgUhH0ad4dB73ZSaN/0i1+/ne54nXbnA5KBMSiVxjw3+FrLSTJlqNfcxWdnPz563TDcZaMRsuVSLlcrtSJxzlVG4k7spRhTaRwrLjK1vLxUv798FkwKvG5d7XthGO6ZPEchBMSrGAgK6/UasiwDAkLG/3mKN2PGQCbJk2ivktImi41G48CLomjPBo+LR3h4fID5fIZJkiC8+uFuqwM2m80DbzAYOGCW3EP8cAVZfIeac8zTFA3VVGca+R9OcxoNHUsThclSurHQBuNMgcrhJXAyGcMw6sP4foRUI9RKoaFGGWpSrnPngXLRBOFcoKJ1IaUVTW8BUjNACAlaa5RPG7e/DyyQkTK61KCSlJ7aApxOpxDHMUEFUgPw2f8vazYzxrirXJrQxRxAiS01pEaYxWJhqMOGMea8VZqmzhPQUPaGgIZeY6wpJQ1QYYiuN0Dq8r4NbEYE2ohASCA3tlnZUtiaWkvT9dZytFqt916n03lHhyWB016vR398xKynbBllxazR33Neac3uR3fs4uIn0zrfrJHWJDw/P9/1jo6O3lQqFT8IAv/4+NgvFApOpVLJr1arvl0rl8tONi4Wi/5JcOLXajU397xer9f9w8PDt38Bk7Cd8ji9wz4AAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Published package"
        title=""
        src="/static/9be800ea5db75a774ea4524f0457875b/5b758/npm_published_module.png"
        srcset="/static/9be800ea5db75a774ea4524f0457875b/e6885/npm_published_module.png 180w,
/static/9be800ea5db75a774ea4524f0457875b/e17e9/npm_published_module.png 360w,
/static/9be800ea5db75a774ea4524f0457875b/5b758/npm_published_module.png 720w,
/static/9be800ea5db75a774ea4524f0457875b/a00f5/npm_published_module.png 1080w,
/static/9be800ea5db75a774ea4524f0457875b/74039/npm_published_module.png 1440w,
/static/9be800ea5db75a774ea4524f0457875b/c6a95/npm_published_module.png 2160w,
/static/9be800ea5db75a774ea4524f0457875b/7ad9a/npm_published_module.png 2952w"
        sizes="(max-width: 720px) 100vw, 720px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h3>Releasing new versions</h3>
<p>After some iterations, the package might need new features and, therefore a new version. NPM packages use semantic versioning (<a href="https://semver.org/">SEMVER</a>), but in a nutshell:</p>
<blockquote>
<p>MAJOR version when you make incompatible API changes,</p>
<p>MINOR version when you add functionality in a backwards-compatible manner, and</p>
<p>PATCH version when you make backwards-compatible bug fixes.</p>
</blockquote>
<p>In the <code>jsonapi-errors</code> example, a minor version increment is required. To do this, a <code>npm version minor</code> can be used, where it will bump the <code>package.json</code> version and add a tagged git commit. Then, a <code>npm publish</code> will take care of pushing it (no need for <code>access</code> parameter now). The version tags can be checked using <code>git log --decorate --oneline</code>.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">b874866 <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> master, tag: v0.2.0<span class="token punctuation">)</span> 0.2.0
c5af2df chore: add new implementations
b8571cc <span class="token punctuation">(</span>tag: v0.1.0<span class="token punctuation">)</span> 0.1.0
c5bf2ef chore: initial commit</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>
<p>There are <a href="https://docs.npmjs.com/cli/version.html">more information about the versioning process here</a>.</p>
<!-- ![](https://cdn-images-1.medium.com/max/1600/1*gg3mGMbiQMFB7FKQQi8NzQ.gif) -->
<h3>Using in local projects through linking</h3>
<p>A simple way to test the new shiny package is through <code>npm install</code>. It will work as expected but, if a change is required, a new version has to be published and the project dependency has to be upgraded to use the new one.</p>
<p>This is unproductive, especially when a package is new and changes happen quite often. A way to solve it is through <code>npm link</code>: it creates a symbolic link inside the project <code>node_modules</code> folder, replacing the installed version with the local one.</p>
<p>In the module folder, run <code>npm link</code>, which will enable a global link for it. On the project folder, run <code>npm link &#x3C;name></code>. If the module is modified, projects using it through a link will have the latest version of it.</p>
<p>After testing, two steps are required to remove it. The first is running <code>npm unlink --no-save &#x3C;name></code>, which removes the link from the project without touching <code>package.json</code>. The second is <code>npm install</code>, as the module is removed from <code>node_modules</code> after unlinking.</p>
<p>Removing the global link is not required, especially because it can be used later. If still needed, a <code>npm unlink</code> in the module folder will do it.</p>
<h2>Automate publishing process using CircleCI</h2>
<p>If a package has many people collaborating to it, or the deploy process requires extra steps beside publishing it, an automated setup can improve the workflow. There are plenty of options, such as CircleCI, Travis and GitLab CI.</p>
<p>On CircleCI Blog there is an <a href="https://circleci.com/blog/publishing-npm-packages-using-circleci-2-0/">article explaining in details how to do it</a>, where:</p>
<ol>
<li>On feature branches, it will just run tests (eg: run tests on pull requests)</li>
<li>On git <code>v*.*.*</code> tag pushes, it will run tests and then publish to the NPM repository  —  remembering, a git version tag is generated by <code>npm version</code> </li>
</ol>
<p>More configurations can be added, such as saving coverage reports to a bucket or triggering specific web hooks after the jobs (eg: Slack).</p>
<h2>Setup default npm init configs</h2>
<p>Starting a package with <code>npm init</code> is fine, but repeating the same information over and over can get quite boring. <code>npm config</code> can be used to setup some default configs:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token function">npm</span> config <span class="token keyword">set</span> init-author-name<span class="token operator">=</span><span class="token string">'Bruno Luiz da Silva'</span>
<span class="token function">npm</span> config <span class="token keyword">set</span> init-author-email<span class="token operator">=</span><span class="token string">'contact@brunoluiz.net'</span>
<span class="token function">npm</span> config <span class="token keyword">set</span> init-author-url<span class="token operator">=</span><span class="token string">'https://brunoluiz.net'</span>
<span class="token function">npm</span> config <span class="token keyword">set</span> init-license<span class="token operator">=</span><span class="token string">'MIT'</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>
<p>These are saved at <code>~/.npmrc</code>, together with other user configs.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># ~/.npmrc</span>

init-author-name<span class="token operator">=</span>Bruno Luiz da Silva
init-author-email<span class="token operator">=</span>contact@brunoluiz.net
init-author-url<span class="token operator">=</span>http://brunoluiz.net/
init-version<span class="token operator">=</span>1.0.0
<span class="token punctuation">..</span>.</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Now, a simple <code>npm init -y</code> can be used to create packages. It will not ask for user input, using the npm configs instead and <code>@&#x3C;scope>/&#x3C;folder-name></code> as the name.</p>
<p>There are many other configs available through it. Besides, projects can have their own specific configs and even environment variables can be used for it. Check <a href="https://docs.npmjs.com/misc/config">the npm documentation</a> for more details.</p>
<h2>Where to go now?</h2>
<p>The steps shown in this article will cover most basic necessities on npm package publishing, but there are some specifics I haven’t covered in this article.</p>
<ol>
<li><strong>Publish the package as TypeScript:</strong> this allows code typing, more robust codes and, in editors such as VS Code, it enables a batter IntelliSense. <a href="https://itnext.io/step-by-step-building-and-publishing-an-npm-typescript-package-44fe7164964c">There is a quite complete article on
ITNext</a>.</li>
<li><strong>Publish it to a private repository:</strong> there are some small different configurations, as pointing the package scope to the private repository. <a href="https://docs.npmjs.com/creating-and-publishing-private-packages">Give a look in this npm article</a>.</li>
</ol></div><hr style="margin-bottom:1.56rem"/><div style="display:flex;margin-bottom:1.56rem"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:50px;height:50px;margin-right:0.78rem;margin-bottom:0;min-width:50px;border-radius:100%"><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB5TsqPWYhCIZwf//EAB0QAAICAQUAAAAAAAAAAAAAAAECAAMQERITITP/2gAIAQEAAQUCdm0TnqtIET13q1hsix+8f//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EAB4QAAIBAwUAAAAAAAAAAAAAAAERAgAQIRIiMTJB/9oACAEBAAY/AjCHaoai2UQ7Tw9tAEDBbs/a4t//xAAcEAADAAIDAQAAAAAAAAAAAAAAAREhMUFhcYH/2gAIAQEAAT8hXoVPhq2VkirZDqkVGJDB0pyVdNfInNpehn//2gAMAwEAAgADAAAAEDPIPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABwQAQADAQADAQAAAAAAAAAAAAEAESExQWFx8P/aAAgBAQABPxAycATEL2/3Ydw8L6WtPHY/cWD0AGqyenEg2hf2Co4wl6gtNdyBAkK2K8R05nyf/9k=" alt="Bruno Luiz Silva" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s;border-radius:50%"/><noscript><picture><source srcSet="/static/1bc3bc127b6330fdc88c2211310fe75a/d2d31/profile-pic.jpg 1x,
/static/1bc3bc127b6330fdc88c2211310fe75a/0b804/profile-pic.jpg 1.5x,
/static/1bc3bc127b6330fdc88c2211310fe75a/753c3/profile-pic.jpg 2x,
/static/1bc3bc127b6330fdc88c2211310fe75a/31ca8/profile-pic.jpg 3x" /><img width="50" height="50" src="/static/1bc3bc127b6330fdc88c2211310fe75a/d2d31/profile-pic.jpg" alt="Bruno Luiz Silva" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><p>Personal Blog by <strong>Bruno Luiz Silva</strong> <a href="mailto:contact@brunoluiz.net">(contact me)</a><br/>A collection of random software engineering thoughts</p></div><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0;margin-left:0"><li><a rel="prev" href="/2018/mar/a-tale-of-how-to-not-deploy-two-months-old-features/">← <!-- -->A Tale Of How To Not Deploy Two Months Old Features</a></li><li><a rel="next" href="/2019/mar/kubernetes-devops-productivity-hacks/">Kubernetes devops productivity hacks<!-- --> →</a></li></ul><div id="disqus_thread" identifier="c32d01de-13a4-5db5-b64c-70332bbc64d5" title="A guide on npm package publishing"></div></main></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-86893932-1', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"2019-feb-a-guide-to-npm-package-publishing-d9b","path":"/2019/feb/a-guide-to-npm-package-publishing/"};window.dataPath="490/path---2019-feb-a-guide-to-npm-package-publishing-d-9-b-3e5-POffpzGCoG4gxioqeal8ZSgax0";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.ab12e96a601961374afc.css","/app-cb3b67d3f42d9a4e1cee.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js.132541fd5a755e92f694.css","/component---src-templates-blog-post-js-bfc555a71129283c7eab.js"],"component---src-pages-404-js":["/component---src-pages-404-js.e4c66166a7f063b243f8.css","/component---src-pages-404-js-c00bcd9f8b782819c269.js"],"component---src-pages-index-js":["/component---src-pages-index-js.e4c66166a7f063b243f8.css","/component---src-pages-index-js-986807adad2cd2fc8592.js"],"pages-manifest":["/pages-manifest-1a02659dd54c273bb190.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-bfc555a71129283c7eab.js" async=""></script><script src="/0-4410c611fa011026aa02.js" async=""></script><script src="/app-cb3b67d3f42d9a4e1cee.js" async=""></script><script src="/webpack-runtime-5e20dcb144742c021ea4.js" async=""></script></body></html>