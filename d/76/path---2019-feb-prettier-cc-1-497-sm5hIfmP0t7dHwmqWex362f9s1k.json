{"data":{"site":{"siteMetadata":{"title":"Bruno Luiz Blog","author":"Bruno Luiz Silva"}},"markdownRemark":{"id":"c0b1597d-e093-50b5-b1ca-77bd265a0d5f","excerpt":"In any programming language, different code quality and formatting discussions emerge. In JavaScript, it is no different. Discussions around the topic exist…","html":"<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/45948cd26d8484a11ae7b94787fbee4c/c686f/header.jpeg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 720px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDAgT/xAAWAQEBAQAAAAAAAAAAAAAAAAAABAX/2gAMAwEAAhADEAAAAetvWVTAoH//xAAWEAEBAQAAAAAAAAAAAAAAAAAQEQD/2gAIAQEAAQUC0I//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwFX/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8BiP/EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABgQAQEBAQEAAAAAAAAAAAAAAAABEWEh/9oACAEBAAE/IZFLPU6Z1j//2gAMAwEAAgADAAAAEGs//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8QqH//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/EHlFH//EABcQAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQEAAT8QzJMlmgRecU99dv/Z'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Photo by Markus Spiske on Unsplash\"\n        title=\"\"\n        src=\"/static/45948cd26d8484a11ae7b94787fbee4c/cfe7c/header.jpeg\"\n        srcset=\"/static/45948cd26d8484a11ae7b94787fbee4c/f39eb/header.jpeg 180w,\n/static/45948cd26d8484a11ae7b94787fbee4c/e1b9c/header.jpeg 360w,\n/static/45948cd26d8484a11ae7b94787fbee4c/cfe7c/header.jpeg 720w,\n/static/45948cd26d8484a11ae7b94787fbee4c/deb56/header.jpeg 1080w,\n/static/45948cd26d8484a11ae7b94787fbee4c/cf22f/header.jpeg 1440w,\n/static/45948cd26d8484a11ae7b94787fbee4c/54366/header.jpeg 2160w,\n/static/45948cd26d8484a11ae7b94787fbee4c/c686f/header.jpeg 5760w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>In any programming language, different code quality and formatting discussions emerge. In JavaScript, it is no different. Discussions around the topic exist since the beginning of it.</p>\n<p>Many projects start without any configuration, because no one wants to dig into “what is the best code style guide I should follow”. This might help devs to not get into <a href=\"https://en.wikipedia.org/wiki/Analysis_paralysis\">analysis paralysis</a> but, after sometime, the code can get quite messy. Everybody coding in its own way, using made up conventions… The situation gets bad fast.</p>\n<p>Some code quality and formatting issues can be usually solved through linters and code formaters.</p>\n<h2>Linting: the first step</h2>\n<p>Linters are useful for a couple of stuff. Since syntax validation and style formatting analysis, to code smell and bad code detection.</p>\n<p>The most popular linter in JavaScript is <a href=\"https://eslint.org/\"><code>eslint</code></a>.  Using a set of rules, editors with linting support can indicate which parts of the code are breaking determined quality rules, sometimes even auto-fixing it. They are pretty much complete and flexible on it’s rules.</p>\n<p>The issue is which rules to choose. Some developers use the famous <a href=\"https://www.npmjs.com/package/eslint-config-airbnb\"> Airbnb eslint configs</a>, but people usually over customize it. As the following example, projects using <code>eslint</code> can have plenty of <code>eslint-*</code> packages to achieve the team settled coding style configuration. </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// package.json</span>\n<span class=\"token operator\">...</span>\n<span class=\"token string\">\"eslint-config-airbnb-base\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^5.0.1\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"eslint-config-standard\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^5.3.5\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"eslint-plugin-filenames\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^1.1.0\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"eslint-plugin-import\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^1.12.0\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"eslint-plugin-promise\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^2.0.0\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token operator\">...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\">// .eslintrc.json\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"env\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">\"mocha\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"parserOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">\"sourceType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"script\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"airbnb-base\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"plugins\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"filenames\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"rules\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"arrow-parens\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"as-needed\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"comma-dangle\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"never\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"filenames/match-regex\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"^[a-z0-9-.]+$\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"import/no-extraneous-dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> <span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"import/newline-after-import\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"off\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"indent\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"max-len\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">120</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"no-console\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"error\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"prefer-arrow-callback\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> <span class=\"token property\">\"allowNamedFunctions\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"prefer-rest-params\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"off\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"prefer-spread\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"off\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"quote-props\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"consistent-as-needed\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"space-before-function-paren\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"never\"</span> <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Nasty, isn’t it?</p>\n<h2>Enter StandardJS</h2>\n<p>StandardJS is a popular JavaScript community attempt to solve the “too many rules” issue. The team need to only add <a href=\"https://standardjs.com/\"><code>standard</code></a> linter and it should settle discussions. It is an opionated linter, with <a href=\"https://standardjs.com/#standardjs--the-rules\">plenty of default rules</a> and <a href=\"https://standardjs.com/#i-disagree-with-rule-x-can-you-change-it\">no way for customization</a>.</p>\n<p>There are some complications around StandardJS though (personal opinion: I still like it). Calling it “standard”, where it is not actually the “de facto” standard for JS projects, can confuse people (there is even a <a href=\"https://standardjs.com/#but-this-isnt-a-real-web-standard\"> disclaimer in their page </a>). But, the biggest polemic, is the decission to not use semi-colons.</p>\n<p>The project arguments it is unnecessary nowadays, as all JS engines can deal with it using Automatic Semicolon Insertion (ASI). The catch is that ASI doesn’t work as expected in some cases, and some think it can generate performance penalties.</p>\n<p>It is still a good option for linting. If semi-colons are preferred, <a href=\"https://github.com/Flet/semistandard\"><code>semistandard</code></a> can be used instead.</p>\n<h2>Prettier: a no-brainer code formatter for your code</h2>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3832770c55dc52cdcfe9430da2bd2eeb/3a204/prettier.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 720px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 41.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAA+UlEQVQoz5VRa2+CQBD0//8c0y+NsX5QU41i6iOgxQcSYqkQFYHKwXHTcxWDjxiZZHO7s3uTm70SJIQQoPMcV5w80zQ9xyk/csRTT1zNlrLCcR3oloaNo4NFEQlzzvEqMp2L4MqcQ1sssVYV7O05GBeotzoYqGOY1gpT2VMnOtWzpQnrx6aYGSbstXP/QvfXhqt9wJiO4Ich/CBAs6NA6Y/QUr5Qfq+i3euj3u5iqE1QbXwS91apYeftH1g2LHiLb8Qswt+Bkd2sl8g8ThIwFuMg1+EHIbY7j/JE8nnbJEjXeAzB5eJz+yiCyw5xK5D7sSJxZ/nZUBH8A3hbbF1G9FePAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Prettier logo\"\n        title=\"\"\n        src=\"/static/3832770c55dc52cdcfe9430da2bd2eeb/5b758/prettier.png\"\n        srcset=\"/static/3832770c55dc52cdcfe9430da2bd2eeb/e6885/prettier.png 180w,\n/static/3832770c55dc52cdcfe9430da2bd2eeb/e17e9/prettier.png 360w,\n/static/3832770c55dc52cdcfe9430da2bd2eeb/5b758/prettier.png 720w,\n/static/3832770c55dc52cdcfe9430da2bd2eeb/a00f5/prettier.png 1080w,\n/static/3832770c55dc52cdcfe9430da2bd2eeb/3a204/prettier.png 1200w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>While StandardJS tries to be the no-brainer linting option, Prettier tries to do the same for code formatting.</p>\n<p>There are some differences between linters and code formatting, enabling both to be even used together. </p>\n<p>As previously said, a linter is a code analysis tool and doesn’t apply only to formatting. Code formatter, on the other hand, just care about the code style. Usually, it is run after saving or commiting files, where it rewrites the file using a pre-defined set of code style rules. A <a href=\"https://prettier.io/docs/en/comparison.html\">brief comparison can be found here</a>.</p>\n<p>Prettier fits exactly in this category. As it doesn’t do code analysis, a linter can still be used together to indicate issues through the code.</p>\n<p>It comes with some pre-defined rules, allowing some customization over it. As it is highly opionated, developers should trust these rules and don’t think/discuss them anymore (although some customization is still allowed).</p>\n<p>Even with this narrow flexibility, there is a way to configure Prettier to be compatible with StandardJS. Someone even isolated it in package called <a href=\"https://github.com/sheerun/prettier-standard\"><code>prettier-standard</code></a>, to make developers life easier.</p>\n<h2>Installing and configuring Prettier and StandardJS</h2>\n<p>Install the required packages using <code>npm install husky lint-staged prettier standard</code>. <code>husky</code> and <code>lint-staged</code> will enable the implementation of pre-commit hooks, where prettier can be ran.</p>\n<p>To make Prettier compatible with StandardJS, create a file named <code>.prettierrc.json</code> with the following content, or install <code>prettier-standard</code> (easier option, but add extra dependency).</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\">// .prettierrc.json\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"singleQuote\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"jsxSingleQuote\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"noSemi\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>That’s it! To re-format the actual code, run <code>./node_modules/.bin/prettier --write \"**/*.js\"</code>. Be prepared for many files being changed. As it is just code formatting, it will not break anything.</p>\n<p>It is a good practice to include an <code>.editorconfig</code> file, specifying some formatting rules for code editors.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\"># .editorconfig\n\nroot = true\n\n[*]\nend_of_line = lf\ninsert_final_newline = true\n\n[*.{js,md,json}]\ncharset = utf-8\nindent_style = space\ntab_width = 2\ntrim_trailing_whitespace = true</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>To enable <code>prettier</code> pre-commit hook, a change is needed on <code>package.json</code>, although many modern editors already enable the same thing in the save process.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"></span></pre></div>","frontmatter":{"title":"Linters and Code Formatters in JS: the no-brainer way","date":"February 19, 2019","cover":{"childImageSharp":{"fixed":{"width":1200,"height":800,"src":"/static/45948cd26d8484a11ae7b94787fbee4c/935ac/header.jpeg","srcSet":"/static/45948cd26d8484a11ae7b94787fbee4c/935ac/header.jpeg 1x,\n/static/45948cd26d8484a11ae7b94787fbee4c/77668/header.jpeg 1.5x,\n/static/45948cd26d8484a11ae7b94787fbee4c/5347b/header.jpeg 2x,\n/static/45948cd26d8484a11ae7b94787fbee4c/6da74/header.jpeg 3x"}}}}}},"pageContext":{"slug":"/2019/feb/prettier/","previous":{"fields":{"slug":"/2019/feb/a-guide-to-npm-package-publishing/"},"frontmatter":{"title":"A guide on npm package publishing"}},"next":null}}